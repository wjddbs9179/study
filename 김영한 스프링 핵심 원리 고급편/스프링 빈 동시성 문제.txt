1. 스프링 빈은 기본적으로 싱글톤으로 등록이 되기 때문에 클래스 내부에 필드는 모든 쓰레드가 공유하게 된다.
2. 싱글톤으로 등록된 스프링 빈의 필드를 누군가가 변경하게 된다면, 모든 쓰레드(사용자)에게 영향을 미친다.
3. 예를 들어 어떤 사용자가 name이라는 필드를 "userA"로 변경하고 name을 조회하면 "userA" 를 조회하게 되지만 로직 실행 중에
누군가가 "userB"로 변경하면 "userB"를 조회하게 된다.
4. 이런 문제를 해결하기 위해서 자바에서는 ThreadLocal 개념을 지원한다.
5. ThreadLocal은 각각의 쓰레드 마다 별도의 저장소를 지원하기 때문에 동시성 문제를 해결 할 수 있다.
6. ThreadLocal을 사용할 때 주의점은 WAS(Tomcat)의 경우 요청이 들어오면 쓰레드 풀에서 쓰레드를 꺼내어 사용하고, 요청에 대한 응답이 끝나면
다시 쓰레드 풀에 반환하여 저장하기 때문에 ThreadLocal의 값을 원상복구 시키지 않으면 이전 사용자가 변경했던 값이 다음 사용자가 요청했을 때
남아 있게 된다. 그러므로 반드시 로직이 끝나기 전에 remove()매서드를 호출 하여 값을 지우거나 처음 초기화 할 때 들어있던 값으로 되돌려 놓아야 한다. 